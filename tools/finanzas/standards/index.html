<!DOCTYPE html>
<html ng-app="finanzas">
<head>
	<title>Standards</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
	<link rel="stylesheet" href="../../../css/jquery.dataTables.min.css">
	<link rel="stylesheet" href="../../../css/spin.css">
	<link rel="stylesheet" type="text/css" href="main.css">
</head>
<body ng-controller="Analytics">
	<main>
		<section class="container">
			<form class="row">
				<div class="input-field col s6 m2 l2">
					<input placeholder="Fecha de Inicio" type="date" class="datepicker-in" name="fecha_in" id="fecha_in">
					<label for="access_token">From</label>
				</div>
				<div class="input-field col s6 m2 l2">
					<input placeholder="Fecha de Fin" type="date" class="datepicker-out" name="fecha_out" id="fecha_out">
					<label for="access_token">To</label>
				</div>
				<div class="input-field col s12 m3 l3">
					<input id="access_token" ng-model="access_token" name="access_token" type="text"  value="">
					<label for="access_token">Token</label>
				</div>	
        		<div class="input-field col s12 m2 l2">
        			<select name="programa" id="programa">
      					<option value="" disabled selected>Programa</option>
      					<option value="1">oGV</option>
      					<option value="2">oGT</option>
      					<option value="3">oGE</option>
      					<option value="4">iGV</option>
      					<option value="5">iGT</option>
      					<option value="6">iGE</option>
    				</select>
        		</div>
        		<div class="input-field col s12 m2 l2">
        			<button ng-click='go()' class="btn waves-effect waves-light" type="submit" name="action">analyze</button>	        			
        		</div>
			</form>
			<div id="spinnerContainer" class="spinner"></div>
			<div id="loading-txt" align="center" font-size="40px">Teste</div>
		</section>

		<section class="fluid-container">			
			<article class="row">
				<div class="col-md-12">
					<!--<table class="table table-stripped">-->
							
					<table class="striped" id="table_apd">
						<thead>
							
							<tr>
								<th>#</th>
								<th>Status</th>
								<th>EP ID</th>
								<th>Nombre</th>
								<th>E-mail</th>
								<th>Home LC</th>
								<th>Home MC</th>
								<th>OPP ID</th>
								<th>OPP Title</th>
								<th>Host LC</th>
								<th>Host MC</th>
								<th>Fecha de RE</th>
								<th>Fecha de FI/CO</th>
								<th>Personal Goal Setting</th>
								<th>Outgoing Preparation</th>
								<th>Expectation Setting</th>
								<th>Insurance</th>
								<th>Visa and Work Permit</th>
								<th>Arrival Pickup</th>
								<th>Accomodation</th>
								<th>Incoming Preparation</th>
								<th>First Day of Work</th>
								<th>Alignment Spaces With Opp Provider</th>
								<th>Job Description</th>
								<th>Working Hours</th>
								<th>Duration</th>
								<th>Opportunity Benefits</th>
								<th>Departure Support</th>
								<th>Debrief With AIESEC</th>
								
							</tr>
						</thead>
						<tbody id="table_apd_body">
							<tr ng-repeat="p in people">
								<th>{{$index + 1}}</th>
								<th>{{p.status}}</th>
								<th><a href="https://expa.aiesec.org/people/{{p.ep_id}}">{{p.ep_id}}</a></th>
								<th>{{p.name}}</th>
								<th>{{p.email}}</th>
								<th>{{p.home_lc}}</th>
								<th>{{p.home_mc}}</th>
								<th><a href="https://expa.aiesec.org/opportunities/{{p.tn_id}}">{{p.tn_id}}</a></th>
								<th>{{p.tn_name}}</th>
								<th>{{p.host_lc}}</th>
								<th>{{p.host_mc}}</th>
								<th>{{p.experience_start_date}}</th>
								<th>{{p.experience_end_date}}</th>
								<th>{{p.personal_goal_setting}}</th>
								<th>{{p.outgoing_preparation}}</th>
								<th>{{p.expectation_setting}}</th>
								<th>{{p.insurance}}</th>
								<th>{{p.visa_and_work_permit}}</th>
								<th>{{p.arrival_pickup}}</th>
								<th>{{p.accomodation}}</th>
								<th>{{p.incoming_preparation}}</th>
								<th>{{p.first_day_of_work}}</th>
								<th>{{p.alignment_spaces_with_opp_provider}}</th>
								<th>{{p.job_description}}</th>
								<th>{{p.working_hours}}</th>
								<th>{{p.duration}}</th>
								<th>{{p.opportunity_benefits}}</th>
								<th>{{p.departure_support}}</th>
								<th>{{p.debrief_with_aiesec}}</th>
								
							</tr>
						</tbody>
					</table>
				</div>
				
			</article>
		</section>
	</main>

	<!-- SCRIPTS -->
	<script src="https://code.jquery.com/jquery-2.2.2.js" integrity="sha256-4/zUCqiq0kqxhZIyp4G0Gk+AOtCJsY1TA00k5ClsZYE=" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
	<script src="../../../js/jquery.dataTables.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/spin.js/2.3.2/spin.js"></script>
	<script type="text/javascript" src="finanzas.js"></script>

	<!-- Compiled and minified JavaScript -->
  		<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
  		<script>
		
		const getToken = () =>  {
			return $.get("http://blog.aiesecargentina.org:5000");
			};
	
		$(window).load(async function(){
			
			var token = await getToken()
			document.getElementById("access_token").value = token

		})

	    $(document).ready( function() {
			$('.datepicker-in').pickadate({
				format: 'yyyy-mm-dd',
				formatSubmit: 'yyyy-mm-dd',
    			selectMonths: true, // Creates a dropdown to control month
    			selectYears: 15, // Creates a dropdown of 15 years to control year
    			max: true
  			});
  			$('.datepicker-out').pickadate({
  				format: 'yyyy-mm-dd',
  				formatSubmit: 'yyyy-mm-dd',
    			selectMonths: true, // Creates a dropdown to control month
    			selectYears: 15, // Creates a dropdown of 15 years to control year
    			max: true
			  });
			
	        $('#status').fadeOut(); // will first fade out the loading animation
			$('#preloader').delay(1).fadeOut('slow'); // will fade out the white DIV that covers the website.
			$('body').delay(1).css({'overflow':'visible'});

			$('select').material_select();
  			
		});
		 
  		</script>
</body>
</html>